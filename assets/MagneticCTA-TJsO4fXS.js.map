{"version":3,"file":"MagneticCTA-TJsO4fXS.js","sources":["../../components/MagneticCTA.tsx"],"sourcesContent":["import { motion, useMotionValue, useSpring, useTransform } from \"framer-motion\";\nimport { useRef, MouseEvent, useState, useEffect } from \"react\";\nimport { Download } from \"lucide-react\";\nimport { ModernButton } from \"./ModernButton\";\nimport { logDownload } from \"../src/firebase\";\nimport { isMobileDevice, prefersReducedMotion } from \"../src/utils/deviceDetect\";\n\nexport function MagneticCTA() {\n  const ref = useRef<HTMLDivElement>(null);\n  const x = useMotionValue(0);\n  const y = useMotionValue(0);\n  const [isMobile, setIsMobile] = useState(false);\n  const [reducedMotion, setReducedMotion] = useState(false);\n\n  useEffect(() => {\n    setIsMobile(isMobileDevice());\n    setReducedMotion(prefersReducedMotion());\n  }, []);\n\n  const springConfig = { damping: 25, stiffness: 150 };\n  const springX = useSpring(x, springConfig);\n  const springY = useSpring(y, springConfig);\n\n  const rotateX = useTransform(springY, [-50, 50], [5, -5]);\n  const rotateY = useTransform(springX, [-50, 50], [-5, 5]);\n\n  const animationDuration = isMobile || reducedMotion ? 0.3 : 0.6;\n\n  const handleMouseMove = (e: MouseEvent<HTMLDivElement>) => {\n    if (!ref.current) return;\n\n    const rect = ref.current.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n\n    x.set(e.clientX - centerX);\n    y.set(e.clientY - centerY);\n  };\n\n  const handleMouseLeave = () => {\n    x.set(0);\n    y.set(0);\n  };\n\n  const handleDownloadClick = () => {\n    logDownload('cta_button', 'ViewFlow Browser');\n  };\n\n  return (\n    <section className=\"py-32 relative overflow-hidden\">\n      {/* Animated Background */}\n      <div className=\"absolute inset-0\">\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-cyan-950/20 to-transparent\" />\n        <motion.div\n          animate={{\n            backgroundPosition: [\"0% 0%\", \"100% 100%\"],\n          }}\n          transition={{\n            duration: 20,\n            repeat: Infinity,\n            repeatType: \"reverse\",\n          }}\n          className=\"absolute inset-0 opacity-30\"\n          style={{\n            backgroundImage: `radial-gradient(circle at 50% 50%, #00ccff22 1px, transparent 1px)`,\n            backgroundSize: \"50px 50px\",\n          }}\n        />\n      </div>\n\n      <div className=\"container mx-auto px-6 relative z-10\">\n        <div className=\"max-w-4xl mx-auto text-center\">\n          {/* Main CTA Card */}\n          <motion.div\n            ref={ref}\n            onMouseMove={!isMobile && !reducedMotion ? handleMouseMove : undefined}\n            onMouseLeave={!isMobile && !reducedMotion ? handleMouseLeave : undefined}\n            style={!isMobile && !reducedMotion ? {\n              rotateX,\n              rotateY,\n              transformStyle: \"preserve-3d\",\n            } : {}}\n            className=\"relative p-12 md:p-16 rounded-3xl bg-gradient-to-br from-slate-900/90 to-slate-800/90 border border-cyan-400/30 backdrop-blur-xl shadow-2xl\"\n          >\n            {/* Animated Gradient Border */}\n            {!isMobile && !reducedMotion ? (\n              <motion.div\n                animate={{\n                  rotate: 360,\n                }}\n                transition={{\n                  duration: 8,\n                  repeat: Infinity,\n                  ease: \"linear\",\n                }}\n                className=\"absolute inset-0 rounded-3xl\"\n                style={{\n                  background: \"conic-gradient(from 0deg, #00ccff, #1e40af, #00ccff)\",\n                  padding: \"2px\",\n                  WebkitMask: \"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)\",\n                  WebkitMaskComposite: \"xor\",\n                  maskComposite: \"exclude\",\n                }}\n              />\n            ) : (\n              <div\n                className=\"absolute inset-0 rounded-3xl\"\n                style={{\n                  background: \"linear-gradient(135deg, #00ccff, #1e40af)\",\n                  padding: \"2px\",\n                  WebkitMask: \"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)\",\n                  WebkitMaskComposite: \"xor\",\n                  maskComposite: \"exclude\",\n                }}\n              />\n            )}\n\n            {/* Content */}\n            <div className=\"relative z-10\">\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: animationDuration }}\n              >\n                <h2 className=\"text-4xl md:text-6xl font-bold mb-6 will-change-transform\">\n                  <span className=\"bg-gradient-to-r from-white via-cyan-200 to-cyan-400 bg-clip-text text-transparent\">\n                    Ready to Transform Your TV?\n                  </span>\n                </h2>\n              </motion.div>\n\n              {/* Magnetic Download Button - Centered */}\n              <motion.div\n                initial={{ opacity: 0, scale: 0.9 }}\n                whileInView={{ opacity: 1, scale: 1 }}\n                viewport={{ once: true }}\n                transition={{ duration: animationDuration, delay: isMobile || reducedMotion ? 0.1 : 0.2 }}\n                className=\"flex justify-center items-center\"\n              >\n                <MagneticButton>\n                  <a\n                    href=\"https://www.baidu.com/a.apk\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    onClick={handleDownloadClick}\n                  >\n                    <ModernButton\n                      size=\"lg\"\n                      glow\n                      icon={<Download className=\"w-6 h-6\" />}\n                    >\n                      Download ViewFlow Browser\n                    </ModernButton>\n                  </a>\n                </MagneticButton>\n              </motion.div>\n            </div>\n\n            {/* Decorative Orbs */}\n            <div className=\"absolute top-0 right-0 w-64 h-64 bg-cyan-500/10 rounded-full blur-3xl -z-10\" />\n            <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl -z-10\" />\n          </motion.div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default MagneticCTA;\n\nfunction MagneticButton({ children }: { children: React.ReactNode }) {\n  const ref = useRef<HTMLDivElement>(null);\n  const x = useMotionValue(0);\n  const y = useMotionValue(0);\n  const [isMobile, setIsMobile] = useState(false);\n  const [reducedMotion, setReducedMotion] = useState(false);\n\n  useEffect(() => {\n    setIsMobile(isMobileDevice());\n    setReducedMotion(prefersReducedMotion());\n  }, []);\n\n  const springConfig = { damping: 20, stiffness: 200 };\n  const springX = useSpring(x, springConfig);\n  const springY = useSpring(y, springConfig);\n\n  const handleMouseMove = (e: MouseEvent<HTMLDivElement>) => {\n    if (!ref.current || isMobile || reducedMotion) return;\n\n    const rect = ref.current.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n\n    const distance = Math.sqrt(\n      Math.pow(e.clientX - centerX, 2) + Math.pow(e.clientY - centerY, 2)\n    );\n\n    if (distance < 150) {\n      x.set((e.clientX - centerX) * 0.3);\n      y.set((e.clientY - centerY) * 0.3);\n    }\n  };\n\n  const handleMouseLeave = () => {\n    x.set(0);\n    y.set(0);\n  };\n\n  return (\n    <motion.div\n      ref={ref}\n      onMouseMove={!isMobile && !reducedMotion ? handleMouseMove : undefined}\n      onMouseLeave={!isMobile && !reducedMotion ? handleMouseLeave : undefined}\n      style={!isMobile && !reducedMotion ? { x: springX, y: springY } : {}}\n    >\n      {children}\n    </motion.div>\n  );\n}"],"names":["MagneticCTA","ref","useRef","x","useMotionValue","y","isMobile","setIsMobile","useState","reducedMotion","setReducedMotion","useEffect","isMobileDevice","prefersReducedMotion","springConfig","springX","useSpring","springY","rotateX","useTransform","rotateY","animationDuration","handleMouseMove","e","rect","centerX","centerY","handleMouseLeave","handleDownloadClick","logDownload","jsxs","jsx","motion","MagneticButton","ModernButton","Download","children"],"mappings":"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"}