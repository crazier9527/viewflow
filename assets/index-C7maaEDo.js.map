{"version":3,"file":"index-C7maaEDo.js","sources":["../../src/firebase/performance.ts"],"sourcesContent":["// Firebase Performance Monitoring Utilities\nimport { trace } from \"firebase/performance\";\nimport { performance } from \"./config\";\n\n/**\n * Create and start a custom trace\n * @param traceName - Name of the trace\n * @returns Trace object with stop method\n */\nexport const startTrace = (traceName: string) => {\n  if (!performance) {\n    return {\n      putAttribute: () => {},\n      putMetric: () => {},\n      stop: () => {},\n    };\n  }\n\n  try {\n    const customTrace = trace(performance, traceName);\n    customTrace.start();\n    console.log('⚡ Performance trace started:', traceName);\n\n    return {\n      putAttribute: (name: string, value: string) => {\n        customTrace.putAttribute(name, value);\n      },\n      putMetric: (name: string, value: number) => {\n        customTrace.putMetric(name, value);\n      },\n      stop: () => {\n        customTrace.stop();\n        console.log('⚡ Performance trace stopped:', traceName);\n      },\n    };\n  } catch (error) {\n    console.error('Failed to start trace:', error);\n    return {\n      putAttribute: () => {},\n      putMetric: () => {},\n      stop: () => {},\n    };\n  }\n};\n\n/**\n * Measure the duration of an async operation\n * @param traceName - Name of the trace\n * @param operation - Async function to measure\n * @returns Result of the operation\n */\nexport const measureAsync = async <T>(\n  traceName: string,\n  operation: () => Promise<T>\n): Promise<T> => {\n  const customTrace = startTrace(traceName);\n\n  try {\n    const result = await operation();\n    customTrace.stop();\n    return result;\n  } catch (error) {\n    customTrace.putAttribute('error', 'true');\n    customTrace.stop();\n    throw error;\n  }\n};\n\n/**\n * Measure the duration of a synchronous operation\n * @param traceName - Name of the trace\n * @param operation - Function to measure\n * @returns Result of the operation\n */\nexport const measureSync = <T>(traceName: string, operation: () => T): T => {\n  const customTrace = startTrace(traceName);\n\n  try {\n    const result = operation();\n    customTrace.stop();\n    return result;\n  } catch (error) {\n    customTrace.putAttribute('error', 'true');\n    customTrace.stop();\n    throw error;\n  }\n};\n\n/**\n * Track page load performance\n */\nexport const trackPageLoad = () => {\n  if (typeof window === 'undefined' || !window.performance) return;\n\n  const pageLoadTrace = startTrace('page_load');\n\n  // Wait for page to fully load\n  if (document.readyState === 'complete') {\n    recordPageLoadMetrics(pageLoadTrace);\n  } else {\n    window.addEventListener('load', () => {\n      recordPageLoadMetrics(pageLoadTrace);\n    });\n  }\n};\n\n/**\n * Record page load metrics from Navigation Timing API\n */\nconst recordPageLoadMetrics = (pageLoadTrace: ReturnType<typeof startTrace>) => {\n  try {\n    const perfData = window.performance.timing;\n    const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;\n    const connectTime = perfData.responseEnd - perfData.requestStart;\n    const renderTime = perfData.domComplete - perfData.domLoading;\n\n    pageLoadTrace.putMetric('page_load_time', pageLoadTime);\n    pageLoadTrace.putMetric('connect_time', connectTime);\n    pageLoadTrace.putMetric('render_time', renderTime);\n    pageLoadTrace.stop();\n\n    console.log('⚡ Page load metrics recorded:', {\n      pageLoadTime,\n      connectTime,\n      renderTime,\n    });\n  } catch (error) {\n    console.error('Failed to record page load metrics:', error);\n    pageLoadTrace.stop();\n  }\n};\n\n/**\n * Track component render performance\n * @param componentName - Name of the component\n * @returns Object with start and stop methods\n */\nexport const trackComponentRender = (componentName: string) => {\n  const renderTrace = startTrace(`${componentName}_render`);\n\n  return {\n    start: () => {\n      console.log('⚡ Component render started:', componentName);\n    },\n    stop: () => {\n      renderTrace.stop();\n      console.log('⚡ Component render completed:', componentName);\n    },\n  };\n};\n"],"names":["startTrace","traceName","performance","customTrace","trace","name","value","error","trackPageLoad","pageLoadTrace","recordPageLoadMetrics","perfData","pageLoadTime","connectTime","renderTime"],"mappings":"mJASO,MAAMA,EAAcC,GAAsB,CAC/C,GAAI,CAACC,EACH,MAAO,CACL,aAAc,IAAM,CAAC,EACrB,UAAW,IAAM,CAAC,EAClB,KAAM,IAAM,CAAC,CAAA,EAIjB,GAAI,CACF,MAAMC,EAAcC,EAAMF,EAAaD,CAAS,EAChD,OAAAE,EAAY,MAAA,EACZ,QAAQ,IAAI,+BAAgCF,CAAS,EAE9C,CACL,aAAc,CAACI,EAAcC,IAAkB,CAC7CH,EAAY,aAAaE,EAAMC,CAAK,CACtC,EACA,UAAW,CAACD,EAAcC,IAAkB,CAC1CH,EAAY,UAAUE,EAAMC,CAAK,CACnC,EACA,KAAM,IAAM,CACVH,EAAY,KAAA,EACZ,QAAQ,IAAI,+BAAgCF,CAAS,CACvD,CAAA,CAEJ,OAASM,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,CACL,aAAc,IAAM,CAAC,EACrB,UAAW,IAAM,CAAC,EAClB,KAAM,IAAM,CAAC,CAAA,CAEjB,CACF,EAgDaC,EAAgB,IAAM,CACjC,GAAI,OAAO,OAAW,KAAe,CAAC,OAAO,YAAa,OAE1D,MAAMC,EAAgBT,EAAW,WAAW,EAGxC,SAAS,aAAe,WAC1BU,EAAsBD,CAAa,EAEnC,OAAO,iBAAiB,OAAQ,IAAM,CACpCC,EAAsBD,CAAa,CACrC,CAAC,CAEL,EAKMC,EAAyBD,GAAiD,CAC9E,GAAI,CACF,MAAME,EAAW,OAAO,YAAY,OAC9BC,EAAeD,EAAS,aAAeA,EAAS,gBAChDE,EAAcF,EAAS,YAAcA,EAAS,aAC9CG,EAAaH,EAAS,YAAcA,EAAS,WAEnDF,EAAc,UAAU,iBAAkBG,CAAY,EACtDH,EAAc,UAAU,eAAgBI,CAAW,EACnDJ,EAAc,UAAU,cAAeK,CAAU,EACjDL,EAAc,KAAA,EAEd,QAAQ,IAAI,gCAAiC,CAC3C,aAAAG,EACA,YAAAC,EACA,WAAAC,CAAA,CACD,CACH,OAASP,EAAO,CACd,QAAQ,MAAM,sCAAuCA,CAAK,EAC1DE,EAAc,KAAA,CAChB,CACF"}